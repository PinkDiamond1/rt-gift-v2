<!------------------------------------------- TO DO------------------------------------------>
<!--Do checking Before Attempting to post form the frontend, and forbid to send the message to the backend if the poster is not eligible--->
<!------------------------------------------------------------------------------------------->

<p class="font_body_title">CREATE A NEW POST</p>
<hr>
<p class="font_body_normal">1 post = 1 token. Ideally, only RÃ¡hel and Tomi can create new posts!</p>
<p class="font_body_normal" id="active_account"></p>
<p class="font_body_normal" id="token_balance"></p>
<p class="font_body_normal" id="eth_balance"></p>
<hr>

<!---------------------------------------SCRIPTS---------------------------------------------->

<script>
    function updateAccount() {
        Dapp.getAccount().then(function (account) {
            console.log("Active account: " + account);
            document.getElementById("active_account").innerHTML = "Active account: " + account;
        });
    }

    function updateBalance() {
        Dapp.getTokenBalance().then(function (tbalance) {
            console.log("Token balance: " + tbalance);
            document.getElementById("token_balance").innerHTML = "Token balance: " + tbalance;
        });
    }

    function updateEth() {
        Dapp.getETHBalance().then(function (balance) {
            console.log("ETH balance (for gas): " + balance);
            document.getElementById("eth_balance").innerHTML = "ETH balance (for gas): " + balance;
        });
    }

    updateAccount();
    updateBalance();
    updateEth();

    function checkPost() {
        console.log(document.getElementById("textarea_message").value);
        Dapp.sendPost(document.getElementById("textarea_message").value).then(function(res) {
            console.log(res);
            updateAccount();
            updateBalance();
            updateEth();
        })
    };

    window.ethereum.on('accountsChanged', function (accounts) {
        console.log("Active account changed.")
        updateAccount();
        updateBalance();
        updateEth();
    });

</script>

<!---------------------------------------INPUT FIELD---------------------------------------------->

<textarea class="scrollabletextbox textarea font_body_normal" id="textarea_message" name="note" rows=12 cols=80
    placeholder="What do you have to preserve forever? ^^">
</textarea>

<button type="button" id="create_post" onclick="checkPost()">Post!</button>